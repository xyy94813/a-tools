---
url: /a-tools/n-tree/api/filter.md
---

# filter

::: warning

1. This is an in-place function, will modify original tree.
2. Tree node will not be modified, if its parent node is not matched.
   :::

Filter tree by matcher.

## Types

```ts
function filter<TNode = TreeNode>(
  root: TNode | undefined | null,
  callback: (node: TNode, pNode?: TNode) => boolean,
  propertyName?: string
): typeof root
```

## Example

### Filter Tree By Matcher

:::code-group

```js [javascript]
import { filter, toArray } from '@a-tools/n-tree'

const root = {
  id: 1,
  children: [
    { id: 2, children: [{ id: 4 }, { id: 5 }] },
    { id: 3, children: [{ id: 6 }, { id: 7 }] },
  ],
}

filter(root, node => node.id < 6)
toArray(root).map(node => node.id) // [1, 2, 3, 4, 5]
```

```ts [javascript]
import { filter, toArray } from '@a-tools/n-tree'

type TNode = { id: number, children?: TNode[] }

const root: TNode = {
  id: 1,
  children: [
    { id: 2, children: [{ id: 4 }, { id: 5 }] },
    { id: 3, children: [{ id: 6 }, { id: 7 }] },
  ],
}

filter<TNode>(root, node => node.id < 6)
toArray<TNode>(root).map(node => node.id) // [1,2,3,4,5,6,7]
```

:::

### Specified Child Property

:::code-group

```js [javascript]
import { filter, toArray } from '@a-tools/n-tree'

const root = {
  id: 1,
  child: [
    { id: 2, child: [{ id: 4 }, { id: 5 }] },
    { id: 3, child: [{ id: 6 }, { id: 7 }] },
  ],
}

filter(root, node => node.id < 6, 'child')
toArray(root, { property: 'child' }).map(node => node.id) // [1, 2, 3, 4, 5]
```

```ts [javascript]
import { filter, toArray } from '@a-tools/n-tree'

type TNode = { id: number, child?: TNode[] }

const root: TNode = {
  id: 1,
  child: [
    { id: 2, child: [{ id: 4 }, { id: 5 }] },
    { id: 3, child: [{ id: 6 }, { id: 7 }] },
  ],
}

filter<TNode>(root, node => node.id < 6, 'child')
toArray<TNode>(root, { property: 'child' }).map(node => node.id) // [1,2,3,4,5,6,7]
```

:::

---

---
url: /a-tools/n-tree/api/findAll.md
---

# findAll

Returns an array containing all nodes that match the condition.

:::info
Unlike `filter()`, `findAll()` only includes nodes whose parents also match the condition.
:::

## Types

```ts
function findAll<TNode = TreeNode>(
  root: TNode,
  callback: (node: TNode, pNode?: TNode) => boolean,
  options?: TraverseParameters[2]
): (typeof root)[]
```

## Example

### Find All Matched Node

:::code-group

```js [javascript]
import { findAll } from '@a-tools/n-tree'

const root = {
  id: 1,
  children: [
    { id: 2, children: [{ id: 4 }, { id: 5 }] },
    { id: 3, children: [{ id: 6 }, { id: 7 }] },
  ],
}

findAll(root, node => !!(node.id % 2))
  .map(node => node.id) // [1, 3, 5, 7]
```

```ts [typescript]
import { findAll } from '@a-tools/n-tree'

type TNode = { id: number, children?: TNode[] }

const root: TNode = {
  id: 1,
  children: [
    { id: 2, children: [{ id: 4 }, { id: 5 }] },
    { id: 3, children: [{ id: 6 }, { id: 7 }] },
  ],
}

findAll<TNode>(root, node => !!(node.id % 2))
  .map(node => node.id) // [1, 3, 5, 7]
```

:::

### Specified Child Property

:::code-group

```js [javascript]
import { findAll } from '@a-tools/n-tree'

const root = {
  id: 1,
  child: [
    { id: 2, child: [{ id: 4 }, { id: 5 }] },
    { id: 3, child: [{ id: 6 }, { id: 7 }] },
  ],
}

findAll(root, node => node.id % 2, { property: 'child' })
  .map(node => node.id) // [1, 3, 5, 7]
```

```ts [typescript]
import { findAll } from '@a-tools/n-tree'

type TNode = { id: number, child?: TNode[] }

const root: TNode = {
  id: 1,
  child: [
    { id: 2, child: [{ id: 4 }, { id: 5 }] },
    { id: 3, child: [{ id: 6 }, { id: 7 }] },
  ],
}

findAll<TNode>(root, node => node.id % 2, { property: 'child' })
  .map(node => node.id) // [1, 3, 5, 7]
```

:::

---

---
url: /a-tools/n-tree/api/getDepth.md
---

# getDepth

Returns the depth of N-Tree.

## Types

```ts
function getDepth<TNode = TreeNode>(
  root: TNode,
  property?: string
): number
```

## Example

### Common Use

:::code-group

```js [javascript]
import { getDepth } from '@a-tools/n-tree'

const root = {
  id: 1,
  child: [
    { id: 2, child: [{ id: 4 }, { id: 5 }] },
    { id: 3, child: [{ id: 6 }, { id: 7 }] },
  ],
}

getDepth(root) // 3
getDepth(null) // 0
```

```ts [javascript]
import { getDepth } from '@a-tools/n-tree'

type TNode = { id: number, children?: TNode[] }

const root: TNode = {
  id: 1,
  children: [
    { id: 2, children: [{ id: 4 }, { id: 5 }] },
    { id: 3, children: [{ id: 6 }, { id: 7 }] },
  ],
}

getDepth<TNode>(root) // 3
getDepth(null) // 0
```

:::

### Specified Child Property

:::code-group

```js [javascript]
import { getDepth } from '@a-tools/n-tree'

const root = {
  id: 1,
  child: [
    { id: 2, child: [{ id: 4 }, { id: 5 }] },
    { id: 3, child: [{ id: 6 }, { id: 7 }] },
  ],
}

getDepth(root, 'child') // 3
```

```ts [javascript]
import { getDepth } from '@a-tools/n-tree'

type TNode = { id: number, child?: TNode[] }

const root: TNode = {
  id: 1,
  children: [
    { id: 2, children: [{ id: 4 }, { id: 5 }] },
    { id: 3, children: [{ id: 6 }, { id: 7 }] },
  ],
}

getDepth<TNode>(root, 'child') // 3
```

:::

---

---
url: /a-tools/n-tree/guide/getting-started.md
---

# @a-tools/n-tree

Common helpers and utils for n-tree

## Install

:::code-group

```sh [yarn]
yarn add @a-tools/n-tree
```

```sh [npm]
npm i @a-tools/n-tree
```

```sh [pnpm]
pnpm add @a-tools/n-tree
```

:::

## License

MIT

---

---
url: /a-tools/n-tree/api/groupByLevel.md
---

# groupByLevel

Returns an array. Each element of the array represents a level of the tree node.

## Types

```ts
function groupByLevel<TNode = TreeNode>(
  root: TNode,
  property?: string
): TNode[][]
```

## Example

### Common Use

:::code-group

```js [javascript]
import { groupByLevel } from '@a-tools/n-tree'

const root = {
  id: 1,
  child: [
    { id: 2, child: [{ id: 4 }, { id: 5 }] },
    { id: 3, child: [{ id: 6 }, { id: 7 }] },
  ],
}

groupByLevel(root).map(level => level.map(node => node.id))
// result is:
// [
//   [1],
//   [2, 3],
//   [4, 5, 6, 7],
// ]
```

```ts [javascript]
import { groupByLevel } from '@a-tools/n-tree'

type TNode = { id: number, children?: TNode[] }

const root: TNode = {
  id: 1,
  children: [
    { id: 2, children: [{ id: 4 }, { id: 5 }] },
    { id: 3, children: [{ id: 6 }, { id: 7 }] },
  ],
}

groupByLevel<TNode>(root).map(level => level.map(node => node.id))
// result is:
// [
//   [1],
//   [2, 3],
//   [4, 5, 6, 7],
// ]
```

:::

### Specified Child Property

:::code-group

```js [javascript]
import { groupByLevel } from '@a-tools/n-tree'

const root = {
  id: 1,
  child: [
    { id: 2, child: [{ id: 4 }, { id: 5 }] },
    { id: 3, child: [{ id: 6 }, { id: 7 }] },
  ],
}

groupByLevel(root, 'child')
  .map(level => level.map(node => node.id))
// result is:
// [
//   [1],
//   [2, 3],
//   [4, 5, 6, 7],
// ]
```

```ts [javascript]
import { groupByLevel } from '@a-tools/n-tree'

type TNode = { id: number, child?: TNode[] }

const root: TNode = {
  id: 1,
  children: [
    { id: 2, children: [{ id: 4 }, { id: 5 }] },
    { id: 3, children: [{ id: 6 }, { id: 7 }] },
  ],
}

groupByLevel<TNode>(root, 'child')
  .map(level => level.map(node => node.id))
// result is:
// [
//   [1],
//   [2, 3],
//   [4, 5, 6, 7],
// ]
```

:::

---

---
url: /a-tools/n-tree/api/toArray.md
---

# toArray

Transform tree to array.

## Types

```ts
type TraverseParameters = Parameters<typeof traverse>

function toArray<TNode = TreeNode>(
  root: TNode,
  options?: TraverseParameters[2],
): TNode[]
```

## Example

### With Difference Strategy

:::code-group

```js [javascript]
import { toArray } from '@a-tools/n-tree'

const root = {
  id: 1,
  children: [
    { id: 2, children: [{ id: 4 }, { id: 5 }] },
    { id: 3, children: [{ id: 6 }, { id: 7 }] },
  ],
}

toArray(root).map(node => node.id) // [1,2,3,4,5,6,7], default is bfs
toArray(root, { strategy: 'pre' }).map(node => node.id) // [1,2,4,5,3,6,7]
toArray(root, { strategy: 'post' }).map(node => node.id) // [4,5,2,6,7,3,1]
```

```ts [javascript]
import { toArray } from '@a-tools/n-tree'

type TNode = { id: number, children?: TNode[] }

const root: TNode = {
  id: 1,
  children: [
    { id: 2, children: [{ id: 4 }, { id: 5 }] },
    { id: 3, children: [{ id: 6 }, { id: 7 }] },
  ],
}

toArray<TNode>(root).map(node => node.id) // [1,2,3,4,5,6,7]
```

:::

### Specified Child Property

:::code-group

```js [javascript]
import { toArray } from '@a-tools/n-tree'

const root = {
  id: 1,
  child: [
    { id: 2, child: [{ id: 4 }, { id: 5 }] },
    { id: 3, child: [{ id: 6 }, { id: 7 }] },
  ],
}

toArray(root, { property: 'child' }).map(node => node.id) // [1,2,3,4,5,6,7]
```

```ts [javascript]
import { toArray } from '@a-tools/n-tree'

type TNode = { id: number, child?: TNode[] }

const root: TNode = {
  id: 1,
  children: [
    { id: 2, children: [{ id: 4 }, { id: 5 }] },
    { id: 3, children: [{ id: 6 }, { id: 7 }] },
  ],
}

toArray<TNode>(root).map(node => node.id) // [1,2,3,4,5,6,7]
```

:::

---

---
url: /a-tools/n-tree/api/traverse.md
---

# traverse

Traverse n-tree with strategy. The default strategy is `bfs`.

## Types

```ts
type TreeNode<Key extends string = 'children'> = {
  [p in Key]?: TreeNode<Key>[];
}

type TraverseCallback<Node = TreeNode> = (node: Node, pNode?: Node) => void

type TraverseOptions = {
  strategy?: 'bfs' | 'pre' | 'post'
  property?: string
}

function traverse<TNode = TreeNode>(
  root: TNode,
  callback: TraverseCallback<typeof root>,
  options?: TraverseOptions,
): void
```

## Example

### Bfs as default

:::code-group

```js [javascript]
import { traverse } from '@a-tools/n-tree'

const root = { children: [] }

traverse(root, (cur, parent) => {
  console.log(cur, parent)
})
```

```ts [typescript]
import { traverse } from '@a-tools/n-tree'

const root = { children: [] }

traverse(root, (cur, parent) => {
  console.log(cur, parent)
})
```

:::

### Specified strategy

:::code-group

```js [javascript]
import { traverse } from '@a-tools/n-tree'

const root = { children: [] }

traverse(root, (cur, parent) => {
  console.log(cur, parent)
}, { strategy: 'pre' })
```

```ts [typescript]
import { traverse } from '@a-tools/n-tree'

const root = { children: [] }

traverse(root, (cur, parent) => {
  console.log(cur, parent)
}, { strategy: 'pre' })
```

:::

### Specified child property

:::code-group

```js [javascript]
import { traverse } from '@a-tools/n-tree'

const root = { child: [] }

traverse(root, (cur, parent) => {
  console.log(cur, parent)
}, { property: 'child' })
```

```ts [typescript]
import { traverse } from '@a-tools/n-tree'

type TreeNode = { child?: TreeNode }

const root: TreeNode = { child: [] }

traverse<TreeNode>(root, (cur, parent) => {
  console.log(cur, parent)
}, { property: 'child' })
```

:::
